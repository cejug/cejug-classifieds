<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions name="cejug-classifieds-admin"
	targetNamespace="http://cejug-classifieds.dev.java.net/admin"
	xmlns:contract="http://cejug-classifieds.dev.java.net/admin"
	xmlns:common="http://cejug-classifieds.dev.java.net/metadata/common"
	xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
	xmlns:metadata="http://cejug-classifieds.dev.java.net/admin/metadata"
	xmlns:xsd="http://www.w3.org/2001/XMLSchema"
	xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap12/">

	<wsdl:types>
		<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
			targetNamespace="http://cejug-classifieds.dev.java.net/admin/metadata"
			xmlns:common="http://cejug-classifieds.dev.java.net/metadata/common"
			elementFormDefault="qualified">
			<xsd:import
				namespace="http://cejug-classifieds.dev.java.net/metadata/common"
				schemaLocation="common.xsd" />

			<xsd:element name="MonitorQuery">
				<xsd:complexType>
					<xsd:sequence>
						<xsd:element name="query" type="xsd:string"
							minOccurs="0" maxOccurs="1" />
						<xsd:element name="average.response.length"
							type="xsd:int" default="10" />
					</xsd:sequence>
				</xsd:complexType>
			</xsd:element>

			<xsd:element name="MonitorResponse">
				<xsd:complexType>
					<xsd:sequence minOccurs="1" maxOccurs="1">
						<xsd:element name="service.name"
							type="xsd:string" />
						<xsd:element name="online.since"
							type="xsd:dateTime" />
						<xsd:element name="records"
							type="metadata:OperationTimestamp" minOccurs="0"
							maxOccurs="unbounded" />
					</xsd:sequence>
				</xsd:complexType>
			</xsd:element>

			<xsd:complexType name="OperationTimestamp">
				<xsd:sequence>
					<xsd:element name="operation.name"
						type="xsd:string" />
					<xsd:element name="start" type="xsd:dateTime" />
					<xsd:element name="finish" type="xsd:dateTime" />
					<xsd:element name="client.id" type="xsd:string" />
					<xsd:element name="status" type="xsd:boolean"
						default="true" />
					<xsd:element name="note" type="xsd:string"
						nillable="true" />
				</xsd:sequence>
			</xsd:complexType>


			<xsd:element name="Credentials">
				<xsd:complexType>
					<xsd:sequence>
						<xsd:element name="client.id" type="xsd:string" />
						<xsd:element name="customer.id"
							type="xsd:string" />
						<xsd:element name="customer.role"
							type="xsd:string" />
						<xsd:element name="group" type="xsd:string"
							minOccurs="0" />
					</xsd:sequence>
				</xsd:complexType>
			</xsd:element>

			<xsd:element name="VouchersRequest">
				<xsd:complexType>
					<xsd:sequence>
						<xsd:element name="domain" type="xsd:string" />
						<xsd:element name="domain.customer.login"
							type="xsd:string" nillable="true" />
						<xsd:element name="voucher.type" type="xsd:int"
							minOccurs="1" maxOccurs="unbounded" />
					</xsd:sequence>
				</xsd:complexType>
			</xsd:element>


			<xsd:element name="Vouchers">
				<xsd:complexType>
					<xsd:sequence>
						<xsd:element ref="metadata:VouchersRequest" />
						<xsd:element name="pin.set"
							type="metadata:PinSet" minOccurs="1" maxOccurs="unbounded" />
					</xsd:sequence>
				</xsd:complexType>
			</xsd:element>

			<xsd:complexType name="PinSet">
				<xsd:sequence>
					<xsd:element name="pin" type="xsd:string" />
					<xsd:element name="type" type="xsd:int" />
				</xsd:sequence>
			</xsd:complexType>
		</xsd:schema>
	</wsdl:types>

	<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
	<!-- MESSAGES -->
	<wsdl:message name="ClassifiedsFault">
		<wsdl:part element="common:ServiceFault" name="fault" />
	</wsdl:message>

	<!-- MONITOR -->
	<wsdl:message name="CheckMonitor">
		<wsdl:part element="metadata:MonitorQuery" name="monitor" />
	</wsdl:message>

	<wsdl:message name="CheckMonitorResponse">
		<wsdl:part element="metadata:MonitorResponse"
			name="service.status" />
	</wsdl:message>

	<!-- REQUEST DOMAIN  -->
	<wsdl:message name="RequestDomain">
		<wsdl:part element="common:Domain" name="domain" />
	</wsdl:message>

	<wsdl:message name="RequestDomainResponse">
		<wsdl:part element="common:ServiceStatus" name="status" />
	</wsdl:message>

	<!-- REQUEST VOUCHER -->
	<wsdl:message name="RequestVouchers">
		<wsdl:part element="metadata:VouchersRequest" name="request" />
	</wsdl:message>

	<wsdl:message name="RequestVouchersResponse">
		<wsdl:part element="metadata:Vouchers" name="vouchers" />
	</wsdl:message>

	<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
	<!-- PORT -->
	<wsdl:portType name="CejugClassifiedsAdmin">
		<wsdl:operation name="CheckMonitorOperation">
			<wsdl:input message="contract:CheckMonitor" />
			<wsdl:output message="contract:CheckMonitorResponse" />
			<!-- wsdl:fault name="CheckMonitorException" message="contract:ClassifiedsFault" /-->
		</wsdl:operation>
		<wsdl:operation name="RequestDomainOperation">
			<wsdl:input message="contract:RequestDomain" />
			<wsdl:output message="contract:RequestDomainResponse" />
			<wsdl:fault name="ReportDomainException"
				message="contract:ClassifiedsFault" />
		</wsdl:operation>
		<wsdl:operation name="RequestVoucherOperation">
			<wsdl:input message="contract:RequestVouchers" />
			<wsdl:output message="contract:RequestVouchersResponse" />
			<wsdl:fault name="RequestVoucherException"
				message="contract:ClassifiedsFault" />
		</wsdl:operation>
	</wsdl:portType>

	<wsdl:binding name="CejugClassifiedsAdminBinding"
		type="contract:CejugClassifiedsAdmin">
		<soap:binding style="document"
			transport="http://www.w3.org/2003/05/soap/bindings/HTTP/" />
		<wsdl:operation name="CheckMonitorOperation">
			<soap:operation
				soapAction="http://cejug-classifieds.dev.java.net/admin/CheckMonitor" />
			<wsdl:input>
				<soap:body use="literal" />
			</wsdl:input>
			<wsdl:output>
				<soap:body use="literal" />
			</wsdl:output>
		</wsdl:operation>
		<wsdl:operation name="RequestDomainOperation">
			<soap:operation
				soapAction="http://cejug-classifieds.dev.java.net/business/RequestDomain" />
			<wsdl:input>
				<soap:body use="literal" />
			</wsdl:input>
			<wsdl:output>
				<soap:body use="literal" />
			</wsdl:output>
		</wsdl:operation>
		<wsdl:operation name="RequestVoucherOperation">
			<soap:operation
				soapAction="http://cejug-classifieds.dev.java.net/business/RequestVoucher" />
			<wsdl:input>
				<soap:body use="literal" />
			</wsdl:input>
			<wsdl:output>
				<soap:body use="literal" />
			</wsdl:output>
		</wsdl:operation>
	</wsdl:binding>

	<wsdl:service name="CejugClassifiedsServiceAdmin">
		<wsdl:port name="CejugClassifiedsAdmin"
			binding="contract:CejugClassifiedsAdminBinding">
			<soap:address
				location="http://localhost:8080/cejug-classifieds-server/admin" />
		</wsdl:port>
	</wsdl:service>
</wsdl:definitions>
